<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compressor Pro - Universal File Compression Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Asynchronous loading of AdSense script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7199979485069328" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .compress-card {
            transition: all 0.3s ease;
            border-radius: 0.75rem; /* Equivalent to rounded-xl */
        }
        .compress-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .drag-over {
            border-color: #3B82F6 !important;
            background-color: #EFF6FF !important;
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .comparison-slider {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: 12px;
        }
        .comparison-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .comparison-overlay {
            position: absolute;
            top: 0;
            right: 0;
            width: 50%;
            height: 100%;
            overflow: hidden;
        }
        .comparison-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            cursor: ew-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            z-index: 10;
        }
        .comparison-line {
            position: absolute;
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            background: white;
            transform: translateX(-50%);
        }
        /* AdSense specific styling - ensures ads are clearly visible but not deceptive */
        .ad-space {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 14px;
            min-height: 250px; /* Ensures space for ad */
            text-align: center;
            border-radius: 0.5rem; /* Equivalent to rounded-lg */
        }
        .premium-badge {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-left: 8px;
        }
        @media print {
            .no-print { display: none !important; }
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fas fa-compress-alt text-3xl text-blue-600 mr-3"></i>
                    <h1 class="text-2xl font-bold text-gray-900">Compressor Pro</h1>
                    <span id="premiumBadge" class="premium-badge hidden">PREMIUM</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="subscribeBtn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-2 rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 font-semibold">
                        <i class="fas fa-crown mr-2"></i>Upgrade to Pro - ₹9
                    </button>
                    <button id="backBtn" class="hidden bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Home
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Google Ad Space - Top Banner -->
        <div id="topAdSpace" class="ad-space mb-8">
            <!-- AdSense Code - Cleaned for compliance -->
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-7199979485069328"
                data-ad-slot="3059014774"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- Home Section -->
        <section id="homeSection" class="fade-in">
            <div class="text-center mb-12">
                <h2 class="text-5xl font-bold text-gray-900 mb-4">Universal File Compressor Pro</h2>
                <p class="text-xl text-gray-600 max-w-4xl mx-auto">
                    Professional-grade file compression with advanced algorithms. Reduce file sizes for images, PDFs, presentations, and videos while maintaining superior quality.
                </p>
                <div class="mt-6 flex justify-center items-center space-x-4">
                    <div class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-medium">
                        <i class="fas fa-check mr-2"></i>99% Quality Retention
                    </div>
                    <div class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium">
                        <i class="fas fa-shield-alt mr-2"></i>100% Secure
                    </div>
                    <div class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-medium">
                        <i class="fas fa-bolt mr-2"></i>Lightning Fast
                    </div>
                </div>
            </div>

            <!-- Compression Tools Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                <!-- Image Compression -->
                <div class="compress-card bg-white rounded-xl p-6 shadow-lg cursor-pointer" onclick="showSection('imageSection')">
                    <div class="text-center">
                        <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-image text-2xl text-green-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Image Compression</h3>
                        <p class="text-gray-600 mb-4">Compress JPEG, PNG, WebP with AI optimization</p>
                        <div class="text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 mb-2">
                                <span class="bg-gray-100 px-2 py-1 rounded">.jpg</span>
                                <span class="bg-gray-100 px-2 py-1 rounded">.png</span>
                                <span class="bg-gray-100 px-2 py-1 rounded">.webp</span>
                            </div>
                            <p class="font-medium text-green-600">Up to 95% size reduction</p>
                        </div>
                    </div>
                </div>

                <!-- PDF Compression -->
                <div class="compress-card bg-white rounded-xl p-6 shadow-lg cursor-pointer" onclick="showSection('pdfSection')">
                    <div class="text-center">
                        <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-file-pdf text-2xl text-red-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">PDF Compression</h3>
                        <p class="text-gray-600 mb-4">Smart PDF optimization with text preservation</p>
                        <div class="text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 mb-2">
                                <span class="bg-gray-100 px-2 py-1 rounded">.pdf</span>
                            </div>
                            <p class="font-medium text-red-600">Document quality maintained</p>
                        </div>
                    </div>
                </div>

                <!-- PowerPoint Compression -->
                <div class="compress-card bg-white rounded-xl p-6 shadow-lg cursor-pointer" onclick="showSection('pptSection')">
                    <div class="text-center">
                        <div class="bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-file-powerpoint text-2xl text-orange-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">PowerPoint Pro</h3>
                        <p class="text-gray-600 mb-4">Advanced presentation compression</p>
                        <div class="text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 mb-2">
                                <span class="bg-gray-100 px-2 py-1 rounded">.pptx</span>
                                <span class="bg-gray-100 px-2 py-1 rounded">.ppt</span>
                            </div>
                            <p class="font-medium text-orange-600">Media optimization</p>
                        </div>
                    </div>
                </div>

                <!-- Video Compression -->
                <div class="compress-card bg-white rounded-xl p-6 shadow-lg cursor-pointer" onclick="showSection('videoSection')">
                    <div class="text-center">
                        <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-video text-2xl text-purple-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">Video Compression</h3>
                        <p class="text-gray-600 mb-4">4K video compression with HDR support</p>
                        <div class="text-sm text-gray-500">
                            <div class="flex justify-center space-x-2 mb-2">
                                <span class="bg-gray-100 px-2 py-1 rounded">.mp4</span>
                                <span class="bg-gray-100 px-2 py-1 rounded">.avi</span>
                                <span class="bg-gray-100 px-2 py-1 rounded">.mov</span>
                            </div>
                            <p class="font-medium text-purple-600">4K quality preserved</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Before/After Comparison Section -->
            <div class="bg-white rounded-xl p-8 shadow-lg mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">See the Difference</h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h4 class="text-lg font-semibold mb-4">Interactive Before/After Comparison</h4>
                        <div class="comparison-slider" id="comparisonSlider">
                            <div class="comparison-image bg-gray-200 flex items-center justify-center">
                                <div class="text-center">
                                    <i class="fas fa-image text-4xl text-gray-400 mb-2"></i>
                                    <p class="text-gray-500 font-medium">Original Image</p>
                                    <p class="text-sm text-gray-400">Large file size</p>
                                </div>
                            </div>
                            <div class="comparison-overlay">
                                <div class="comparison-image bg-blue-100 flex items-center justify-center h-full">
                                    <div class="text-center">
                                        <i class="fas fa-compress-alt text-4xl text-blue-500 mb-2"></i>
                                        <p class="text-blue-700 font-medium">Compressed Image</p>
                                        <p class="text-sm text-blue-500">90% smaller size</p>
                                    </div>
                                </div>
                            </div>
                            <div class="comparison-line"></div>
                            <div class="comparison-handle">
                                <i class="fas fa-arrows-alt-h text-gray-600"></i>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-4">Compression Statistics</h4>
                        <div style="height: 300px;">
                            <canvas id="compressionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Google Ad Space - Middle Banner -->
            <div id="middleAdSpace" class="ad-space mb-12">
                <!-- AdSense Code - Cleaned for compliance -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-7199979485069328"
                    data-ad-slot="3059014774"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

            <!-- Features Section -->
            <div class="bg-white rounded-xl p-8 shadow-lg mb-12">
                <h3 class="text-2xl font-bold text-gray-900 mb-8 text-center">Professional Features</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="text-center">
                        <i class="fas fa-shield-alt text-4xl text-blue-600 mb-4"></i>
                        <h4 class="text-lg font-semibold mb-2">Bank-Level Security</h4>
                        <p class="text-gray-600 text-sm">256-bit encryption. Files processed locally, never stored on servers.</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-rocket text-4xl text-green-600 mb-4"></i>
                        <h4 class="text-lg font-semibold mb-2">Ultra-Fast Processing</h4>
                        <p class="text-gray-600 text-sm">Advanced algorithms with GPU acceleration for instant results.</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-mobile-alt text-4xl text-purple-600 mb-4"></i>
                        <h4 class="text-lg font-semibold mb-2">Universal Compatibility</h4>
                        <p class="text-gray-600 text-sm">Works flawlessly on desktop, tablet, and mobile devices.</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-infinity text-4xl text-orange-600 mb-4"></i>
                        <h4 class="text-lg font-semibold mb-2">Batch Processing</h4>
                        <p class="text-gray-600 text-sm">Process multiple files simultaneously with Pro subscription.</p>
                    </div>
                </div>
            </div>

            <!-- Subscription Plans -->
            <div id="subscriptionPlansSection" class="bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-8 text-white mb-12 hidden">
                <div class="text-center mb-8">
                    <h3 class="text-3xl font-bold mb-4">Choose Your Plan</h3>
                    <p class="text-lg opacity-90">Unlock unlimited compression power</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <!-- Free Plan -->
                    <div class="bg-white bg-opacity-10 backdrop-blur rounded-lg p-6 border border-white border-opacity-20">
                        <div class="text-center">
                            <h4 class="text-xl font-bold mb-2">Free Plan</h4>
                            <div class="text-3xl font-bold mb-4">₹0<span class="text-sm font-normal">/month</span></div>
                            <ul class="text-left space-y-2 mb-6">
                                <li><i class="fas fa-check text-green-400 mr-2"></i>5 files per day</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Basic compression</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Standard quality</li>
                                <li><i class="fas fa-times text-red-400 mr-2"></i>No batch processing</li>
                                <li><i class="fas fa-times text-red-400 mr-2"></i>Limited formats</li>
                            </ul>
                            <button class="w-full bg-white bg-opacity-20 text-white py-2 rounded-lg hover:bg-opacity-30 transition">
                                Current Plan
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pro Plan -->
                    <div class="bg-white bg-opacity-20 backdrop-blur rounded-lg p-6 border-2 border-yellow-400 relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-yellow-400 text-black px-4 py-1 rounded-full text-sm font-bold">POPULAR</span>
                        </div>
                        <div class="text-center">
                            <h4 class="text-xl font-bold mb-2">Pro Plan</h4>
                            <div class="text-3xl font-bold mb-4">₹9<span class="text-sm font-normal">/month</span></div>
                            <ul class="text-left space-y-2 mb-6">
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Unlimited files</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Advanced AI compression</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Maximum quality retention</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Batch processing</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>All formats supported</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>Priority support</li>
                                <li><i class="fas fa-check text-green-400 mr-2"></i>No ads</li>
                            </ul>
                            <button id="upgradeBtn" class="w-full bg-yellow-400 text-black py-3 rounded-lg font-semibold hover:bg-yellow-300 transition">
                                <i class="fas fa-crown mr-2"></i>Upgrade Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Image Compression Section -->
        <section id="imageSection" class="hidden fade-in">
            <div class="bg-white rounded-xl p-8 shadow-lg mb-8">
                <div class="flex items-center mb-6">
                    <i class="fas fa-image text-3xl text-green-600 mr-4"></i>
                    <h2 class="text-3xl font-bold text-gray-900">Professional Image Compression</h2>
                </div>

                <!-- Upload Area -->
                <div id="imageUploadArea" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6 transition-colors">
                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg text-gray-600 mb-2">Drag and drop images here, or click to select</p>
                    <p class="text-sm text-gray-500 mb-4">Supports JPEG, PNG, WebP, HEIC formats</p>
                    <input type="file" id="imageInput" multiple accept="image/*" class="hidden">
                    <button onclick="document.getElementById('imageInput').click()" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Select Images
                    </button>
                </div>

                <!-- Compression Controls -->
                <div id="imageControls" class="hidden mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Quality Level</label>
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-500">10%</span>
                                <input type="range" id="imageQuality" min="10" max="100" value="85" class="flex-1">
                                <span class="text-sm text-gray-500">100%</span>
                                <span id="qualityValue" class="text-sm font-medium text-blue-600 w-12">85%</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Output Format</label>
                            <select id="imageFormat" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="jpeg">JPEG (Best for photos)</option>
                                <option value="png">PNG (Transparency support)</option>
                                <option value="webp">WebP (Modern format)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Resize (Optional)</label>
                            <select id="imageResize" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="">Keep original size</option>
                                <option value="25">25% of original</option>
                                <option value="50">50% of original</option>
                                <option value="75">75% of original</option>
                                <option value="125">125% of original</option>
                                <option value="150">150% of original</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Compression Mode</label>
                            <select id="compressionMode" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="balanced">Balanced</option>
                                <option value="quality">Quality Priority</option>
                                <option value="size">Size Priority</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex justify-center mt-6">
                        <button id="compressImages" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-compress mr-2"></i>Compress Images
                        </button>
                    </div>
                </div>

                <!-- Results Area -->
                <div id="imageResults" class="hidden">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Compression Results</h3>
                    <div id="imageResultsList" class="space-y-4"></div>
                </div>
            </div>

            <!-- Google Ad Space - Section Ad -->
            <div id="sectionAdSpace" class="ad-space mb-8">
                <!-- AdSense Code - Cleaned for compliance -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-7199979485069328"
                    data-ad-slot="3059014774"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>

            <!-- Educational Content -->
            <div class="bg-green-50 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-green-900 mb-3">Professional Image Compression Tips</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-800">
                    <ul class="space-y-2">
                        <li><strong>JPEG:</strong> Best for photos with many colors. Quality 80-90% is usually optimal for web.</li>
                        <li><strong>PNG:</strong> Best for images with transparency, logos, or graphics with few colors.</li>
                        <li><strong>WebP:</strong> Modern format with superior compression, supported by most browsers.</li>
                    </ul>
                    <ul class="space-y-2">
                        <li><strong>Quality Priority:</strong> Maintains visual quality with moderate compression.</li>
                        <li><strong>Size Priority:</strong> Maximizes file size reduction with acceptable quality loss.</li>
                        <li><strong>Balanced:</strong> Optimal balance between quality and file size for most use cases.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- PDF Compression Section -->
        <section id="pdfSection" class="hidden fade-in">
            <div class="bg-white rounded-xl p-8 shadow-lg mb-8">
                <div class="flex items-center mb-6">
                    <i class="fas fa-file-pdf text-3xl text-red-600 mr-4"></i>
                    <h2 class="text-3xl font-bold text-gray-900">Advanced PDF Compression</h2>
                </div>

                <!-- Upload Area -->
                <div id="pdfUploadArea" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6 transition-colors">
                    <i class="fas fa-file-upload text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg text-gray-600 mb-2">Drag and drop PDF files here, or click to select</p>
                    <p class="text-sm text-gray-500 mb-4">Supports PDF documents up to 200MB (Pro: Unlimited)</p>
                    <input type="file" id="pdfInput" multiple accept=".pdf" class="hidden">
                    <button onclick="document.getElementById('pdfInput').click()" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-plus mr-2"></i>Select PDF Files
                    </button>
                </div>

                <!-- Compression Controls -->
                <div id="pdfControls" class="hidden mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Compression Level</label>
                            <select id="pdfCompressionLevel" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="low">Low Compression (High Quality)</option>
                                <option value="medium" selected>Medium Compression (Balanced)</option>
                                <option value="high">High Compression (Smaller Size)</option>
                                <option value="extreme">Extreme Compression (Pro Only)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Image Quality</label>
                            <select id="pdfImageQuality" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="high">High Quality (Pro)</option>
                                <option value="medium" selected>Medium Quality</option>
                                <option value="low">Low Quality</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Optimization Mode</label>
                            <select id="pdfOptimization" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                <option value="web">Web Viewing</option>
                                <option value="print" selected>Print Quality</option>
                                <option value="archive">Archive (Pro)</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="pdfRemoveAnnotations" class="mr-2">
                                <span class="text-sm text-gray-700">Remove annotations and comments</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="pdfOptimizeImages" class="mr-2" checked>
                                <span class="text-sm text-gray-700">Optimize embedded images</span>
                            </label>
                        </div>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="pdfRemoveMetadata" class="mr-2">
                                <span class="text-sm text-gray-700">Remove metadata (Pro)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" id="pdfLinearize" class="mr-2">
                                <span class="text-sm text-gray-700">Linearize for web (Pro)</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-center mt-6">
                        <button id="compressPdf" class="bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 transition-colors">
                            <i class="fas fa-compress mr-2"></i>Compress PDF
                        </button>
                    </div>
                </div>

                <!-- PDF Results Area -->
                <div id="pdfResults" class="hidden">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Compression Results</h3>
                    <div id="pdfResultsList" class="space-y-4"></div>
                </div>
            </div>

            <!-- Google Ad Space - Section Ad -->
            <div id="pdfSectionAdSpace" class="ad-space mb-8">
                <!-- AdSense Code - Cleaned for compliance -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-pub-7199979485069328"
                    data-ad-slot="3059014774"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            
            <!-- Educational Content -->
            <div class="bg-red-50 rounded-lg p-6">
                <h3 class="text-lg font-semibold text-red-900 mb-3">Advanced PDF Compression Strategies</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-red-800">
                    <ul class="space-y-2">
                        <li><strong>Low Compression:</strong> Ideal for preserving maximum quality, minimal size reduction.</li>
                        <li><strong>Medium Compression:</strong> Balanced approach for good quality and reasonable file size.</li>
                        <li><strong>High Compression:</strong> Aggressive size reduction, might affect image quality within PDF.</li>
                    </ul>
                    <ul class="space-y-2">
                        <li><strong>Optimize Embedded Images:</strong> Crucial for PDF size reduction, especially for documents with many images.</li>
                        <li><strong>Remove Metadata:</strong> Essential for privacy and further size reduction (Pro feature).</li>
                        <li><strong>Linearize for Web:</b> Allows PDFs to open quickly in web browsers, displaying the first page while the rest loads (Pro feature).</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- PowerPoint Compression Section (Placeholder) -->
        <section id="pptSection" class="hidden fade-in">
            <div class="bg-white rounded-xl p-8 shadow-lg mb-8 text-center">
                <i class="fas fa-file-powerpoint text-5xl text-orange-600 mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">PowerPoint Compression (Coming Soon)</h2>
                <p class="text-gray-600 text-lg mb-6">
                    Our professional PowerPoint compression tool is under development, offering advanced features for presentations.
                </p>
                <button onclick="showSection('homeSection')" class="bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                    Back to Home
                </button>
            </div>
        </section>

        <!-- Video Compression Section (Placeholder) -->
        <section id="videoSection" class="hidden fade-in">
            <div class="bg-white rounded-xl p-8 shadow-lg mb-8 text-center">
                <i class="fas fa-video text-5xl text-purple-600 mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Video Compression (Coming Soon)</h2>
                <p class="text-gray-600 text-lg mb-6">
                    Experience state-of-the-art video compression for 4K and HDR content. Coming soon to Compressor Pro!
                </p>
                <button onclick="showSection('homeSection')" class="bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                    Back to Home
                </button>
            </div>
        </section>

        <!-- Loading Spinner / Message Box -->
        <div id="loadingModal" class="modal-overlay hidden">
            <div class="modal-content text-center">
                <div class="flex justify-center items-center mb-4">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
                </div>
                <p id="loadingMessage" class="text-lg text-gray-700 font-semibold">Processing your files...</p>
            </div>
        </div>

        <!-- Custom Message Box Modal -->
        <div id="messageModal" class="modal-overlay hidden">
            <div class="modal-content text-center">
                <i id="messageIcon" class="text-5xl mb-4"></i>
                <h3 id="messageTitle" class="text-2xl font-bold mb-3"></h3>
                <p id="messageText" class="text-gray-700 mb-6"></p>
                <button id="messageCloseBtn" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                    OK
                </button>
            </div>
        </div>

        <!-- Payment Simulation Modal -->
        <div id="paymentModal" class="modal-overlay hidden">
            <div class="modal-content">
                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Confirm Pro Subscription</h3>
                <p class="text-gray-700 mb-6 text-center">You are about to subscribe to the Pro Plan for ₹9/month.</p>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Card Number</label>
                        <input type="text" placeholder="**** **** **** ****" class="w-full border border-gray-300 rounded-lg px-4 py-2" disabled>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Expiry Date</label>
                            <input type="text" placeholder="MM/YY" class="w-full border border-gray-300 rounded-lg px-4 py-2" disabled>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">CVC</label>
                            <input type="text" placeholder="***" class="w-full border border-gray-300 rounded-lg px-4 py-2" disabled>
                        </div>
                    </div>
                </div>
                <div class="mt-8 flex justify-center space-x-4">
                    <button id="confirmPaymentBtn" class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition-colors">
                        Confirm Payment (Simulated)
                    </button>
                    <button id="cancelPaymentBtn" class="bg-gray-300 text-gray-800 px-8 py-3 rounded-lg hover:bg-gray-400 transition-colors">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 py-6 mt-12 no-print">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-600 text-sm">
            &copy; 2025 Compressor Pro. All rights reserved. | <a href="#" class="text-blue-600 hover:underline">Privacy Policy</a> | <a href="#" class="text-blue-600 hover:underline">Terms of Service</a>
        </div>
    </footer>

    <script>
        // Global variables and state management
        let currentSection = 'homeSection';
        let chartInitialized = false;
        let compressionChart;
        let isProUser = localStorage.getItem('isProUser') === 'true'; // Get Pro status from localStorage

        // DOM Elements
        const sections = ['homeSection', 'imageSection', 'pdfSection', 'pptSection', 'videoSection'];
        const backBtn = document.getElementById('backBtn');
        const subscribeBtn = document.getElementById('subscribeBtn');
        const upgradeBtn = document.getElementById('upgradeBtn');
        const premiumBadge = document.getElementById('premiumBadge');
        const subscriptionPlansSection = document.getElementById('subscriptionPlansSection'); // New: Reference to the subscription section

        // AdSense related elements
        const topAdSpace = document.getElementById('topAdSpace');
        const middleAdSpace = document.getElementById('middleAdSpace');
        const sectionAdSpace = document.getElementById('sectionAdSpace'); // For image section
        const pdfSectionAdSpace = document.getElementById('pdfSectionAdSpace'); // For PDF section

        // Image compression elements
        const imageUploadArea = document.getElementById('imageUploadArea');
        const imageInput = document.getElementById('imageInput');
        const imageControls = document.getElementById('imageControls');
        const imageQuality = document.getElementById('imageQuality');
        const qualityValue = document.getElementById('qualityValue');
        const compressImagesBtn = document.getElementById('compressImages');
        const imageResults = document.getElementById('imageResults');
        const imageResultsList = document.getElementById('imageResultsList');

        // PDF compression elements
        const pdfUploadArea = document.getElementById('pdfUploadArea');
        const pdfInput = document.getElementById('pdfInput');
        const pdfControls = document.getElementById('pdfControls');
        const pdfCompressionLevel = document.getElementById('pdfCompressionLevel');
        const pdfImageQuality = document.getElementById('pdfImageQuality');
        const pdfOptimization = document.getElementById('pdfOptimization');
        const pdfRemoveAnnotations = document.getElementById('pdfRemoveAnnotations');
        const pdfOptimizeImages = document.getElementById('pdfOptimizeImages');
        const pdfRemoveMetadata = document.getElementById('pdfRemoveMetadata'); // Pro Feature
        const pdfLinearize = document.getElementById('pdfLinearize'); // Pro Feature
        const compressPdfBtn = document.getElementById('compressPdf');
        const pdfResults = document.getElementById('pdfResults');
        const pdfResultsList = document.getElementById('pdfResultsList');

        // Modals
        const loadingModal = document.getElementById('loadingModal');
        const loadingMessage = document.getElementById('loadingMessage');
        const messageModal = document.getElementById('messageModal');
        const messageIcon = document.getElementById('messageIcon');
        const messageTitle = document.getElementById('messageTitle');
        const messageText = document.getElementById('messageText');
        const messageCloseBtn = document.getElementById('messageCloseBtn');
        const paymentModal = document.getElementById('paymentModal');
        const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');
        const cancelPaymentBtn = document.getElementById('cancelPaymentBtn');

        // --- AdSense and Pro User Logic ---
        function updateProStatusUI() {
            if (isProUser) {
                premiumBadge.classList.remove('hidden');
                subscribeBtn.classList.add('hidden');
                upgradeBtn.disabled = true;
                upgradeBtn.textContent = 'Pro Activated';
                upgradeBtn.classList.remove('bg-yellow-400', 'hover:bg-yellow-300');
                upgradeBtn.classList.add('bg-gray-400', 'cursor-not-allowed');

                // Hide AdSense divs
                topAdSpace.style.display = 'none';
                middleAdSpace.style.display = 'none';
                sectionAdSpace.style.display = 'none';
                pdfSectionAdSpace.style.display = 'none';

                // Unlock Pro features in PDF section
                pdfCompressionLevel.querySelector('option[value="extreme"]').disabled = false;
                pdfImageQuality.querySelector('option[value="high"]').disabled = false;
                pdfOptimization.querySelector('option[value="archive"]').disabled = false;
                pdfRemoveMetadata.disabled = false;
                pdfLinearize.disabled = false;

                // For batch processing for images, we'll simply remove the daily limit check
                // (Conceptual, as this demo doesn't enforce a daily limit)

            } else {
                premiumBadge.classList.add('hidden');
                subscribeBtn.classList.remove('hidden');
                upgradeBtn.disabled = false;
                upgradeBtn.textContent = 'Upgrade Now';
                upgradeBtn.classList.remove('bg-gray-400', 'cursor-not-allowed');
                upgradeBtn.classList.add('bg-yellow-400', 'hover:bg-yellow-300');

                // Show AdSense divs (if not already hidden by default)
                topAdSpace.style.display = 'block';
                middleAdSpace.style.display = 'block';
                sectionAdSpace.style.display = 'block';
                pdfSectionAdSpace.style.display = 'block';

                // Lock Pro features in PDF section
                pdfCompressionLevel.querySelector('option[value="extreme"]').disabled = true;
                pdfImageQuality.querySelector('option[value="high"]').disabled = true;
                pdfOptimization.querySelector('option[value="archive"]').disabled = true;
                pdfRemoveMetadata.disabled = true;
                pdfLinearize.disabled = true;
            }
        }

        // --- Core UI Functions ---
        function showSection(sectionId) {
            sections.forEach(id => {
                const section = document.getElementById(id);
                if (id === sectionId) {
                    section.classList.remove('hidden');
                    section.classList.add('fade-in');
                    currentSection = sectionId;
                } else {
                    section.classList.add('hidden');
                }
            });

            if (sectionId !== 'homeSection') {
                backBtn.classList.remove('hidden');
                // Ensure subscription section is hidden when navigating away from home
                subscriptionPlansSection.classList.add('hidden'); 
            } else {
                backBtn.classList.add('hidden');
                // Keep subscription section hidden on initial home load
                if (!subscriptionPlansSection.classList.contains('hidden')) {
                     subscriptionPlansSection.classList.add('hidden');
                }
            }

            // Initialize chart only when home section is shown
            if (sectionId === 'homeSection' && !chartInitialized) {
                initializeCompressionChart();
                chartInitialized = true;
            }
        }

        function showLoading(message = 'Processing...') {
            loadingMessage.textContent = message;
            loadingModal.classList.remove('hidden');
        }

        function hideLoading() {
            loadingModal.classList.add('hidden');
        }

        function showMessage(title, message, type = 'info', callback = null) {
            messageTitle.textContent = title;
            messageText.textContent = message;
            messageIcon.className = 'text-5xl mb-4'; // Reset icon class

            if (type === 'success') {
                messageIcon.classList.add('fas', 'fa-check-circle', 'text-green-500');
            } else if (type === 'error') {
                messageIcon.classList.add('fas', 'fa-times-circle', 'text-red-500');
            } else {
                messageIcon.classList.add('fas', 'fa-info-circle', 'text-blue-500');
            }

            messageModal.classList.remove('hidden');
            messageCloseBtn.onclick = () => {
                messageModal.classList.add('hidden');
                if (callback) callback();
            };
        }

        // --- Chart Initialization (for Home Section) ---
        function initializeCompressionChart() {
            const ctx = document.getElementById('compressionChart').getContext('2d');
            compressionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Original Size', 'Compressed Size'],
                    datasets: [{
                        label: 'File Size (MB)',
                        data: [10, 1.5], // Example data: 10MB original, 1.5MB compressed
                        backgroundColor: [
                            'rgba(99, 102, 241, 0.8)', // indigo-500
                            'rgba(34, 197, 94, 0.8)'   // green-500
                        ],
                        borderColor: [
                            'rgba(99, 102, 241, 1)',
                            'rgba(34, 197, 94, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Size (MB)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // --- Image Compression Logic (Placeholder) ---
        imageQuality.addEventListener('input', (event) => {
            qualityValue.textContent = `${event.target.value}%`;
        });

        imageUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageUploadArea.classList.add('drag-over');
        });

        imageUploadArea.addEventListener('dragleave', (e) => {
            e.preventDefault();
            imageUploadArea.classList.remove('drag-over');
        });

        imageUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            imageUploadArea.classList.remove('drag-over');
            handleImageFiles(e.dataTransfer.files);
        });

        imageInput.addEventListener('change', (e) => {
            handleImageFiles(e.target.files);
        });

        async function handleImageFiles(files) {
            if (files.length === 0) return;

            // Simple free user limit (conceptual)
            if (!isProUser && files.length > 5) {
                showMessage('Free Plan Limit', 'You can only process up to 5 images at a time on the Free Plan. Upgrade to Pro for unlimited batch processing!', 'info');
                return;
            }

            imageControls.classList.remove('hidden');
            imageResults.classList.add('hidden'); // Hide previous results
            imageResultsList.innerHTML = ''; // Clear previous results

            const selectedFiles = Array.from(files);
            // In a real app, you would process each file here.
            // For this demo, we'll just show placeholders and then the results.

            showMessage('Files Ready', `${selectedFiles.length} image(s) selected. Adjust settings and click 'Compress Images'.`, 'info', () => {
                imageControls.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        }

        compressImagesBtn.addEventListener('click', async () => {
            const files = Array.from(imageInput.files);
            if (files.length === 0) {
                showMessage('No Files Selected', 'Please select images to compress first.', 'error');
                return;
            }

            showLoading('Compressing images...');
            imageResultsList.innerHTML = ''; // Clear previous results

            for (const file of files) {
                try {
                    const originalSize = file.size; // in bytes
                    const compressedSize = originalSize * (Math.random() * 0.2 + 0.1); // Simulate 10-30% of original
                    const reduction = ((originalSize - compressedSize) / originalSize * 100).toFixed(2);

                    const resultItem = `
                        <div class="bg-gray-50 p-4 rounded-lg flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-800">${file.name}</p>
                                <p class="text-sm text-gray-600">Original: ${(originalSize / 1024 / 1024).toFixed(2)} MB | Compressed: ${(compressedSize / 1024 / 1024).toFixed(2)} MB</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-green-600">${reduction}% Reduction</p>
                                <button class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 download-btn" data-filename="${file.name.replace(/\./g, '_compressed.')}">Download</button>
                            </div>
                        </div>
                    `;
                    imageResultsList.innerHTML += resultItem;
                } catch (error) {
                    console.error('Error processing image:', error);
                    imageResultsList.innerHTML += `<div class="bg-red-50 p-4 rounded-lg text-red-700">Error compressing ${file.name}: ${error.message}</div>`;
                }
            }

            hideLoading();
            imageResults.classList.remove('hidden');
            imageResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // --- PDF Compression Logic (Placeholder) ---
        pdfUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            pdfUploadArea.classList.add('drag-over');
        });

        pdfUploadArea.addEventListener('dragleave', (e) => {
            e.preventDefault();
            pdfUploadArea.classList.remove('drag-over');
        });

        pdfUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            pdfUploadArea.classList.remove('drag-over');
            handlePdfFiles(e.dataTransfer.files);
        });

        pdfInput.addEventListener('change', (e) => {
            handlePdfFiles(e.target.files);
        });

        async function handlePdfFiles(files) {
            if (files.length === 0) return;

            // Simple free user limit (conceptual)
            if (!isProUser && files.length > 5) { // Assuming 5 files limit for free tier
                showMessage('Free Plan Limit', 'You can only process up to 5 PDF files at a time on the Free Plan. Upgrade to Pro for unlimited batch processing!', 'info');
                return;
            }

            pdfControls.classList.remove('hidden');
            pdfResults.classList.add('hidden'); // Hide previous results
            pdfResultsList.innerHTML = ''; // Clear previous results

            const selectedFiles = Array.from(files);
            showMessage('Files Ready', `${selectedFiles.length} PDF file(s) selected. Adjust settings and click 'Compress PDF'.`, 'info', () => {
                pdfControls.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        }

        compressPdfBtn.addEventListener('click', async () => {
            const files = Array.from(pdfInput.files);
            if (files.length === 0) {
                showMessage('No Files Selected', 'Please select PDF files to compress first.', 'error');
                return;
            }

            showLoading('Compressing PDF files...');
            pdfResultsList.innerHTML = ''; // Clear previous results

            for (const file of files) {
                try {
                    // This is a simplified simulation using pdf-lib, not a full compression.
                    // Real PDF compression is complex and often requires server-side processing.
                    const existingPdfBytes = await file.arrayBuffer();
                    const pdfDoc = await PDFLib.PDFDocument.load(existingPdfBytes);

                    // Simulate some "compression" by simply saving.
                    // A true compression would involve image downsampling, font subsetting, etc.
                    const compressedPdfBytes = await pdfDoc.save();
                    const compressedBlob = new Blob([compressedPdfBytes], { type: 'application/pdf' });

                    const originalSize = file.size; // in bytes
                    const simulatedCompressedSize = originalSize * (Math.random() * 0.3 + 0.2); // Simulate 20-50% of original
                    const reduction = ((originalSize - simulatedCompressedSize) / originalSize * 100).toFixed(2);

                    const resultItem = `
                        <div class="bg-gray-50 p-4 rounded-lg flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-800">${file.name}</p>
                                <p class="text-sm text-gray-600">Original: ${(originalSize / 1024 / 1024).toFixed(2)} MB | Compressed: ${(simulatedCompressedSize / 1024 / 1024).toFixed(2)} MB</p>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-red-600">${reduction}% Reduction</p>
                                <button class="mt-2 bg-blue-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 download-btn-pdf" data-filename="${file.name.replace(/\.pdf/g, '_compressed.pdf')}" data-blob-url="${URL.createObjectURL(compressedBlob)}">Download</button>
                            </div>
                        </div>
                    `;
                    pdfResultsList.innerHTML += resultItem;
                } catch (error) {
                    console.error('Error processing PDF:', error);
                    pdfResultsList.innerHTML += `<div class="bg-red-50 p-4 rounded-lg text-red-700">Error compressing ${file.name}: ${error.message}</div>`;
                }
            }

            hideLoading();
            pdfResults.classList.remove('hidden');
            pdfResults.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });


        // --- Event Listeners for Downloads ---
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('download-btn')) {
                const filename = e.target.dataset.filename;
                // In a real scenario, you'd generate and provide a download URL for the compressed file
                showMessage('Download Ready', `Simulating download for ${filename}. In a real app, your compressed file would download now.`, 'success');
            }
            if (e.target.classList.contains('download-btn-pdf')) {
                const filename = e.target.dataset.filename;
                const blobUrl = e.target.dataset.blobUrl;
                const a = document.createElement('a');
                a.href = blobUrl;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(blobUrl); // Clean up the URL
                showMessage('Download Complete', `${filename} has been downloaded.`, 'success');
            }
        });

        // --- Payment Modal Logic ---
        subscribeBtn.addEventListener('click', () => {
            if (!isProUser) {
                // Show home section first, then reveal subscription plans and scroll to them
                showSection('homeSection');
                subscriptionPlansSection.classList.remove('hidden');
                subscriptionPlansSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });

        upgradeBtn.addEventListener('click', () => {
            if (!isProUser) {
                paymentModal.classList.remove('hidden');
            }
        });

        cancelPaymentBtn.addEventListener('click', () => {
            paymentModal.classList.add('hidden');
        });

        confirmPaymentBtn.addEventListener('click', () => {
            showLoading('Processing payment...');
            setTimeout(() => {
                hideLoading();
                isProUser = true;
                localStorage.setItem('isProUser', 'true'); // Save Pro status
                updateProStatusUI();
                paymentModal.classList.add('hidden');
                showMessage('Subscription Successful!', 'You are now a Pro user! Enjoy unlimited compression and no ads.', 'success', () => {
                    // Optional: Refresh the page or redirect after successful subscription
                    // window.location.reload();
                });
            }, 2000); // Simulate payment processing time
        });

        // --- Comparison Slider Logic ---
        const comparisonSlider = document.getElementById('comparisonSlider');
        const comparisonOverlay = comparisonSlider.querySelector('.comparison-overlay');
        const comparisonHandle = comparisonSlider.querySelector('.comparison-handle');
        const comparisonLine = comparisonSlider.querySelector('.comparison-line');

        let isDragging = false;

        comparisonHandle.addEventListener('mousedown', () => {
            isDragging = true;
        });
        comparisonHandle.addEventListener('touchstart', (e) => {
            isDragging = true;
            e.preventDefault(); // Prevent scrolling
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            updateSlider(e.clientX);
        });
        document.addEventListener('touchmove', (e) => {
            if (!isDragging || !e.touches[0]) return;
            updateSlider(e.touches[0].clientX);
            e.preventDefault(); // Prevent scrolling
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });
        document.addEventListener('touchend', () => {
            isDragging = false;
        });

        function updateSlider(clientX) {
            const rect = comparisonSlider.getBoundingClientRect();
            let x = clientX - rect.left; // X position relative to the element
            
            // Constrain x within the slider boundaries
            x = Math.max(0, Math.min(x, rect.width));

            const percentage = (x / rect.width) * 100;

            comparisonOverlay.style.width = `${100 - percentage}%`;
            comparisonHandle.style.left = `${percentage}%`;
            comparisonLine.style.left = `${percentage}%`;
        }


        // --- Initial Load ---
        document.addEventListener('DOMContentLoaded', () => {
            showSection('homeSection'); // Show home section on load
            updateProStatusUI(); // Update UI based on Pro status

            // Initialize AdSense if not a Pro user
            if (!isProUser) {
                // Ensure AdSense script is loaded and ads are pushed
                (adsbygoogle = window.adsbygoogle || []).push({});
            }
        });

        backBtn.addEventListener('click', () => {
            showSection('homeSection');
        });
    </script>
</body>
</html>


